# CHANGE ANALYSIS DOCUMENT

**No.:** CAD-005  
**CR No.:** CR-2024-005  
**Date:** January 19, 2026

---

## System/Project
**TactiLink - Sistema de Traducción Braille**

## Item to be analyzed
Mejoras de Calidad del Código y Testing

---

## Analyzed By
Equipo Tactilink

---

## Background

Aunque TactiLink es funcional en producción, existen oportunidades de mejora en testing, validación de entrada y modularización del código frontend.

---

## Items Affected

| Item ID | Item Description | Version No | Nature of Change |
|---------|------------------|------------|------------------|
| EC-01 | backend/app.py | 2.1 | Mejora: Agregar validación y sanitización de entrada. |
| EC-02 | frontend/script.js | 2.1 | Mejora: Refactorizar en módulos reutilizables. |
| EC-03 | frontend/index.html | 2.0 | Implementado: Botón "Limpiar Todo" (btn-clear). |
| EC-04 | frontend/script.js | 2.0 | Implementado: Función clearAll() para resetear campos. |
| EC-05 | tests/ (nuevo) | 1.0 | Adición: Suite de pruebas unitarias (incluyendo clearAll). |
| EC-06 | .github/workflows/ (nuevo) | 1.0 | Adición: CI/CD con GitHub Actions. |

---

## Current Issues

### 1. Validación Insuficiente en Backend
```python
# Problema: No valida formato de códigos Braille
# Riesgo: Códigos inválidos pueden causar errores silenciosos

# Actual:
def reverse_transcribe(braille_codes_str):
    raw_codes = braille_codes_str.strip().split(' ')
    # Sin validación de formato
```

**Impacto:** Medium - Puede generar resultados inesperados

---

### 2. Script.js Monolítico
```javascript
// Problema: 396 líneas sin modularización
// Riesgo: Difícil de mantener y testear

// Actual:
const fetchAPI = async (endpoint, data) => { ... }
const downloadFile = (content, filename, mimeType) => { ... }
// Funciones globales sin estructura
```

**Impacto:** Medium - Mantenibilidad pobre

---

### 3. Sin Pruebas Automatizadas
```
tests/
├── backend/
│   ├── test_transcribe.py (no existe)
│   ├── test_reverse.py (no existe)
│   └── test_svg_generation.py (no existe)
└── frontend/
    └── test_script.js (no existe)
```

**Impacto:** High - Riesgo de regresiones

---

## Implementation Alternatives

### Alternativa 1: Validación Básica (Recomendada)
Implementar validación de formato en backend:
```python
def validate_braille_code(code: str) -> bool:
    # Valida que solo contenga números 1-6 y espacios
    valid_chars = set('123456 ')
    return all(c in valid_chars for c in code)
```

**Esfuerzo:** 2 HH  
**Impacto:** Mejora seguridad sin cambiar API

---

### Alternativa 2: Modularización Frontend (Recomendada)
Refactorizar script.js en módulos ES6:
```javascript
// transcriber.js
export class BrailleTranscriber {
  async transcribe(text) { ... }
  async reverseTranscribe(code) { ... }
}

// svgGenerator.js
export class SVGGenerator {
  generateSignage(codes) { ... }
  generateMirror(codes) { ... }
}

// fileHandler.js
export class FileHandler {
  download(content, filename) { ... }
}
```

**Esfuerzo:** 4 HH  
**Beneficio:** Código reutilizable, testeable

---

### Alternativa 3: Suite de Pruebas (Recomendada)
Implementar testing con pytest (backend) y Jest (frontend):

**Backend:**
```python
# tests/test_transcribe.py
def test_transcribe_simple_letter():
    result = transcribir_texto_completo("a")
    assert result == "1"

def test_transcribe_with_number():
    result = transcribir_texto_completo("1")
    assert result == "3456 1"
```

**Frontend:**
```javascript
// tests/transcriber.test.js
describe('BrailleTranscriber', () => {
  test('should convert text to braille', async () => {
    const result = await transcriber.transcribe('a');
    expect(result).toBe('1');
  });
});
```

**Esfuerzo:** 6 HH (inicial)  
**ROI:** Alto - Previene 80% de bugs futuros

---

### Alternativa 4: CI/CD con GitHub Actions
Automatizar testing en cada push:

```yaml
# .github/workflows/test.yml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Python
        uses: actions/setup-python@v2
      - name: Run tests
        run: pytest tests/
```

**Esfuerzo:** 2 HH  
**Beneficio:** Previene merges de código roto

---

## Estimated Effort

| Iniciativa | HH | Prioridad |
|-----------|----|---------| 
| Validación Backend | 2 | Alta |
| Modularización Frontend | 4 | Media |
| Suite de Pruebas | 6 | Alta |
| CI/CD GitHub Actions | 2 | Media |
| **TOTAL** | **14 HH** | |

---

## Impact on Schedule

**Timeline sugerida (por iteración):**
- Sprint 1: Validación Backend + CI/CD (4 HH)
- Sprint 2: Suite de Pruebas Backend (4 HH)
- Sprint 3: Modularización Frontend (4 HH)
- Sprint 4: Suite de Pruebas Frontend (2 HH)

**Sin impacto crítico si se distribuye.**

---

## Impact on Cost

**Nulo - Mejora interna**

Mejora mantenibilidad a largo plazo = menor costo futuro.

---
