# CHANGE ANALYSIS DOCUMENT

**No.:** CAD-003  
**CR No.:** CR-2024-003  
**Date:** January 19, 2026

---

## System/Project
**TactiLink - Sistema de Traducción Braille**

## Item to be analyzed
Especificación de API REST y Endpoints

---

## Analyzed By
Equipo Tactilink

---

## Background

El proyecto TactiLink expone cuatro endpoints REST principales para transcripción bidireccional y generación de señalética. Esta documentación formal estandariza la interfaz de comunicación entre Frontend y Backend.

---

## Items Affected

| Item ID | Item Description | Version No | Nature of Change |
|---------|------------------|------------|------------------|
| EC-01 | backend/app.py | 2.0 | Documentación: Agregar especificación de endpoints en formato OpenAPI. |
| EC-02 | Documentación Técnica | 1.0 | Adición: Crear referencia de API REST completa. |
| EC-03 | frontend/script.js | 2.0 | Documentación: Comentarios sobre estructura de request/response. |

---

## Current Endpoints

### 1. POST `/api/transcribe`
**Descripción:** Convierte texto español a código Braille numérico.

**Request:**
```json
{
  "text": "Hola"
}
```

**Response (200 OK):**
```json
{
  "input": "Hola",
  "braille_codes": "46 125 135 123 1"
}
```

**Validaciones:**
- Campo `text` requerido
- Retorna error 400 si falta `text`

---

### 2. POST `/api/reverse-transcribe`
**Descripción:** Convierte código Braille a texto español.

**Request:**
```json
{
  "braille_codes": "46 125 135 123 1"
}
```

**Response (200 OK):**
```json
{
  "text": "Hola",
  "braille_codes": "46 125 135 123 1"
}
```

**Validaciones:**
- Campo `braille_codes` requerido
- Maneja espacios vacíos como separadores
- Ignora prefijos de mayúscula sin letra siguiente

---

### 3. POST `/api/generar_senaletica`
**Descripción:** Genera SVG de señalética Braille normal.

**Request:**
```json
{
  "text": "Hola"
}
```

**Response (200 OK):**
```xml
<svg width="135" height="85" xmlns="http://www.w3.org/2000/svg">
  <rect width="100%" height="100%" fill="white"/>
  <!-- Círculos para cada celda Braille -->
</svg>
```

**Content-Type:** `image/svg+xml`

**Dimensiones:**
- Ancho: `len(celdas) * 25 + 40` px
- Alto: `85` px
- Margen: `20` px

---

### 4. POST `/api/generar_senaletica_espejo`
**Descripción:** Genera SVG invertido para escritura manual Braille (de derecha a izquierda).

**Request:**
```json
{
  "text": "Hola"
}
```

**Response (200 OK):**
```xml
<svg width="135" height="85" xmlns="http://www.w3.org/2000/svg">
  <!-- Celdas invertidas (orden inverso + puntos espejados) -->
</svg>
```

**Content-Type:** `image/svg+xml`

**Transformación:**
- Invierte orden de celdas (última primero)
- Mapea puntos: 1↔4, 2↔5, 3↔6

---

### 5. GET `/health`
**Descripción:** Health check del servicio backend.

**Response (200 OK):**
```json
{
  "status": "healthy"
}
```

---

## Implementation Alternatives

1. **Agregar validación de entrada:** Implementar sanitización y validación explícita de códigos Braille.
2. **Documentar con Swagger/OpenAPI:** Generar documentación interactiva automática.
3. **Agregar autenticación:** Implementar API keys si es necesario limitar acceso.

---

## Estimated Effort
**Total: 4 HH (Horas)**
- Validación de entrada: 2 HH
- Documentación OpenAPI: 1.5 HH
- Pruebas de API: 0.5 HH

---

## Impact on Schedule
**Nulo - Documentación no impacta cronograma**

Mejora la mantenibilidad pero no agrega funcionalidad nueva.

---

## Impact on Cost
**Nulo - Documentación interna**

---
